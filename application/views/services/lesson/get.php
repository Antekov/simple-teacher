<div class="week">
	<div class="w-day">
		<div class="wd-title">
			<span class="wdt-weekday">ПН</span>
			<span class="wdt-date"><?=unix_to_human('2016-06-06', 'd.m')?></span>
		</div>
		<div class="wd-hour" data-hour="7">
			<div class="wdh-half" data-half-hour="00">
			</div>
			<div class="wdh-half" data-half-hour="30">
			</div>
		</div>
		<div class="wd-hour" data-hour="8">
			<div class="wdh-half" data-half-hour="00">
			</div>
			<div class="wdh-half" data-half-hour="30">
			</div>
		</div>
		<div class="wd-hour" data-hour="9">
			<div class="wdh-half" data-half-hour="00">
			</div>
			<div class="wdh-half" data-half-hour="30">
			</div>
		</div>
		<div class="wd-hour" data-hour="10">
			<div class="wdh-half" data-half-hour="00">
			</div>
			<div class="wdh-half" data-half-hour="30">
			</div>
		</div>
		<div class="wd-hour" data-hour="11">
			<div class="wdh-half" data-half-hour="00">
			</div>
			<div class="wdh-half" data-half-hour="30">
			</div>
		</div>
		<div class="wd-hour" data-hour="12">
			<div class="wdh-half" data-half-hour="00">
			</div>
			<div class="wdh-half" data-half-hour="30">
			</div>
		</div>
		<div class="wd-hour" data-hour="13">
			<div class="wdh-half" data-half-hour="00">
			</div>
			<div class="wdh-half" data-half-hour="30">
			</div>
		</div>
		<div class="wd-hour" data-hour="14">
			<div class="wdh-half" data-half-hour="00">
			</div>
			<div class="wdh-half" data-half-hour="30">
			</div>
		</div>
		<div class="wd-hour" data-hour="15">
			<div class="wdh-half" data-half-hour="00">
			</div>
			<div class="wdh-half" data-half-hour="30">
			</div>
		</div>
		<div class="wd-hour" data-hour="16">
			<div class="wdh-half" data-half-hour="00">
			</div>
			<div class="wdh-half" data-half-hour="30">
			</div>
		</div>
		<div class="wd-hour" data-hour="17">
			<div class="wdh-half" data-half-hour="00">
			</div>
			<div class="wdh-half" data-half-hour="30">
			</div>
		</div>
		<div class="wd-hour" data-hour="18">
			<div class="wdh-half" data-half-hour="00">
			</div>
			<div class="wdh-half" data-half-hour="30">
			</div>
		</div>
		<div class="wd-hour" data-hour="19">
			<div class="wdh-half" data-half-hour="00">
			</div>
			<div class="wdh-half" data-half-hour="30">
			</div>
		</div>
		<div class="wd-hour" data-hour="20">
			<div class="wdh-half" data-half-hour="00">
			</div>
			<div class="wdh-half" data-half-hour="30">
			</div>
		</div>
		<div class="wd-hour" data-hour="21">
			<div class="wdh-half" data-half-hour="00">
			</div>
			<div class="wdh-half" data-half-hour="30">
			</div>
		</div>
		<div class="wd-hour" data-hour="22">
			<div class="wdh-half" data-half-hour="00">
			</div>
			<div class="wdh-half" data-half-hour="30">
			</div>
		</div>
	</div>
	<div class="w-day">
		<div class="wd-title">
			<span class="wdt-weekday">ВТ</span>
			<span class="wdt-date"><?=unix_to_human(('2016-06-07'), 'd.m')?></span>
		</div>
		<div class="wd-hour" data-hour="7">
			<div class="wdh-half" data-half-hour="00">
			</div>
			<div class="wdh-half" data-half-hour="30">
			</div>
		</div>
		<div class="wd-hour" data-hour="8">
			<div class="wdh-half" data-half-hour="00">
			</div>
			<div class="wdh-half" data-half-hour="30">
			</div>
		</div>
		<div class="wd-hour" data-hour="9">
			<div class="wdh-half" data-half-hour="00">
			</div>
			<div class="wdh-half" data-half-hour="30">
			</div>
		</div>
		<div class="wd-hour" data-hour="10">
			<div class="wdh-half" data-half-hour="00">
			</div>
			<div class="wdh-half" data-half-hour="30">
			</div>
		</div>
		<div class="wd-hour" data-hour="11">
			<div class="wdh-half" data-half-hour="00">
			</div>
			<div class="wdh-half" data-half-hour="30">
			</div>
		</div>
		<div class="wd-hour" data-hour="12">
			<div class="wdh-half" data-half-hour="00">
			</div>
			<div class="wdh-half" data-half-hour="30">
			</div>
		</div>
		<div class="wd-hour" data-hour="13">
			<div class="wdh-half" data-half-hour="00">
			</div>
			<div class="wdh-half" data-half-hour="30">
			</div>
		</div>
		<div class="wd-hour" data-hour="14">
			<div class="wdh-half" data-half-hour="00">
			</div>
			<div class="wdh-half" data-half-hour="30">
			</div>
		</div>
		<div class="wd-hour" data-hour="15">
			<div class="wdh-half" data-half-hour="00">
			</div>
			<div class="wdh-half" data-half-hour="30">
			</div>
		</div>
		<div class="wd-hour" data-hour="16">
			<div class="wdh-half" data-half-hour="00">
			</div>
			<div class="wdh-half" data-half-hour="30">
			</div>
		</div>
		<div class="wd-hour" data-hour="17">
			<div class="wdh-half" data-half-hour="00">
			</div>
			<div class="wdh-half" data-half-hour="30">
			</div>
		</div>
		<div class="wd-hour" data-hour="18">
			<div class="wdh-half" data-half-hour="00">
			</div>
			<div class="wdh-half" data-half-hour="30">
			</div>
		</div>
		<div class="wd-hour" data-hour="19">
			<div class="wdh-half" data-half-hour="00">
			</div>
			<div class="wdh-half" data-half-hour="30">
			</div>
		</div>
		<div class="wd-hour" data-hour="20">
			<div class="wdh-half" data-half-hour="00">
			</div>
			<div class="wdh-half" data-half-hour="30">
			</div>
		</div>
		<div class="wd-hour" data-hour="21">
			<div class="wdh-half" data-half-hour="00">
			</div>
			<div class="wdh-half" data-half-hour="30">
			</div>
		</div>
		<div class="wd-hour" data-hour="22">
			<div class="wdh-half" data-half-hour="00">
			</div>
			<div class="wdh-half" data-half-hour="30">
			</div>
		</div>
	</div>
	<div class="w-day">
		<div class="wd-title">
			<span class="wdt-weekday">СР</span>
			<span class="wdt-date"><?=unix_to_human(('2016-06-08'), 'd.m')?></span>
		</div>
		<div class="wd-hour" data-hour="7">
			<div class="wdh-half" data-half-hour="00">
			</div>
			<div class="wdh-half" data-half-hour="30">
			</div>
		</div>
		<div class="wd-hour" data-hour="8">
			<div class="wdh-half" data-half-hour="00">
			</div>
			<div class="wdh-half" data-half-hour="30">
			</div>
		</div>
		<div class="wd-hour" data-hour="9">
			<div class="wdh-half" data-half-hour="00">
			</div>
			<div class="wdh-half" data-half-hour="30">
			</div>
		</div>
		<div class="wd-hour" data-hour="10">
			<div class="wdh-half" data-half-hour="00">
			</div>
			<div class="wdh-half" data-half-hour="30">
			</div>
		</div>
		<div class="wd-hour" data-hour="11">
			<div class="wdh-half" data-half-hour="00">
			</div>
			<div class="wdh-half" data-half-hour="30">
			</div>
		</div>
		<div class="wd-hour" data-hour="12">
			<div class="wdh-half" data-half-hour="00">
			</div>
			<div class="wdh-half" data-half-hour="30">
			</div>
		</div>
		<div class="wd-hour" data-hour="13">
			<div class="wdh-half" data-half-hour="00">
			</div>
			<div class="wdh-half" data-half-hour="30">
			</div>
		</div>
		<div class="wd-hour" data-hour="14">
			<div class="wdh-half" data-half-hour="00">
			</div>
			<div class="wdh-half" data-half-hour="30">
			</div>
		</div>
		<div class="wd-hour" data-hour="15">
			<div class="wdh-half" data-half-hour="00">
			</div>
			<div class="wdh-half" data-half-hour="30">
			</div>
		</div>
		<div class="wd-hour" data-hour="16">
			<div class="wdh-half" data-half-hour="00">
			</div>
			<div class="wdh-half" data-half-hour="30">
			</div>
		</div>
		<div class="wd-hour" data-hour="17">
			<div class="wdh-half" data-half-hour="00">
			</div>
			<div class="wdh-half" data-half-hour="30">
			</div>
		</div>
		<div class="wd-hour" data-hour="18">
			<div class="wdh-half" data-half-hour="00">
			</div>
			<div class="wdh-half" data-half-hour="30">
			</div>
		</div>
		<div class="wd-hour" data-hour="19">
			<div class="wdh-half" data-half-hour="00">
			</div>
			<div class="wdh-half" data-half-hour="30">
			</div>
		</div>
		<div class="wd-hour" data-hour="20">
			<div class="wdh-half" data-half-hour="00">
			</div>
			<div class="wdh-half" data-half-hour="30">
			</div>
		</div>
		<div class="wd-hour" data-hour="21">
			<div class="wdh-half" data-half-hour="00">
			</div>
			<div class="wdh-half" data-half-hour="30">
			</div>
		</div>
		<div class="wd-hour" data-hour="22">
			<div class="wdh-half" data-half-hour="00">
			</div>
			<div class="wdh-half" data-half-hour="30">
			</div>
		</div>
	</div>
	<div class="w-day">
		<div class="wd-title">
			<span class="wdt-weekday">ЧТ</span>
			<span class="wdt-date"><?=unix_to_human(('2016-06-09'), 'd.m')?></span>
		</div>
		<div class="wd-hour" data-hour="7">
			<div class="wdh-half" data-half-hour="00">
			</div>
			<div class="wdh-half" data-half-hour="30">
			</div>
		</div>
		<div class="wd-hour" data-hour="8">
			<div class="wdh-half" data-half-hour="00">
			</div>
			<div class="wdh-half" data-half-hour="30">
			</div>
		</div>
		<div class="wd-hour" data-hour="9">
			<div class="wdh-half" data-half-hour="00">
			</div>
			<div class="wdh-half" data-half-hour="30">
			</div>
		</div>
		<div class="wd-hour" data-hour="10">
			<div class="wdh-half" data-half-hour="00">
			</div>
			<div class="wdh-half" data-half-hour="30">
			</div>
		</div>
		<div class="wd-hour" data-hour="11">
			<div class="wdh-half" data-half-hour="00">
			</div>
			<div class="wdh-half" data-half-hour="30">
			</div>
		</div>
		<div class="wd-hour" data-hour="12">
			<div class="wdh-half" data-half-hour="00">
			</div>
			<div class="wdh-half" data-half-hour="30">
			</div>
		</div>
		<div class="wd-hour" data-hour="13">
			<div class="wdh-half" data-half-hour="00">
			</div>
			<div class="wdh-half" data-half-hour="30">
			</div>
		</div>
		<div class="wd-hour" data-hour="14">
			<div class="wdh-half" data-half-hour="00">
			</div>
			<div class="wdh-half" data-half-hour="30">
			</div>
		</div>
		<div class="wd-hour" data-hour="15">
			<div class="wdh-half" data-half-hour="00">
			</div>
			<div class="wdh-half" data-half-hour="30">
			</div>
		</div>
		<div class="wd-hour" data-hour="16">
			<div class="wdh-half" data-half-hour="00">
			</div>
			<div class="wdh-half" data-half-hour="30">
			</div>
		</div>
		<div class="wd-hour" data-hour="17">
			<div class="wdh-half" data-half-hour="00">
			</div>
			<div class="wdh-half" data-half-hour="30">
			</div>
		</div>
		<div class="wd-hour" data-hour="18">
			<div class="wdh-half" data-half-hour="00">
			</div>
			<div class="wdh-half" data-half-hour="30">
			</div>
		</div>
		<div class="wd-hour" data-hour="19">
			<div class="wdh-half" data-half-hour="00">
			</div>
			<div class="wdh-half" data-half-hour="30">
			</div>
		</div>
		<div class="wd-hour" data-hour="20">
			<div class="wdh-half" data-half-hour="00">
			</div>
			<div class="wdh-half" data-half-hour="30">
			</div>
		</div>
		<div class="wd-hour" data-hour="21">
			<div class="wdh-half" data-half-hour="00">
			</div>
			<div class="wdh-half" data-half-hour="30">
			</div>
		</div>
		<div class="wd-hour" data-hour="22">
			<div class="wdh-half" data-half-hour="00">
			</div>
			<div class="wdh-half" data-half-hour="30">
			</div>
		</div>
	</div>
	<div class="w-day">
		<div class="wd-title">
			<span class="wdt-weekday">ПТ</span>
			<span class="wdt-date"><?=unix_to_human(('2016-06-10'), 'd.m')?></span>
		</div>
		<div class="wd-hour" data-hour="7">
			<div class="wdh-half" data-half-hour="00">
			</div>
			<div class="wdh-half" data-half-hour="30">
			</div>
		</div>
		<div class="wd-hour" data-hour="8">
			<div class="wdh-half" data-half-hour="00">
			</div>
			<div class="wdh-half" data-half-hour="30">
			</div>
		</div>
		<div class="wd-hour" data-hour="9">
			<div class="wdh-half" data-half-hour="00">
			</div>
			<div class="wdh-half" data-half-hour="30">
			</div>
		</div>
		<div class="wd-hour" data-hour="10">
			<div class="wdh-half" data-half-hour="00">
			</div>
			<div class="wdh-half" data-half-hour="30">
			</div>
		</div>
		<div class="wd-hour" data-hour="11">
			<div class="wdh-half" data-half-hour="00">
			</div>
			<div class="wdh-half" data-half-hour="30">
			</div>
		</div>
		<div class="wd-hour" data-hour="12">
			<div class="wdh-half" data-half-hour="00">
			</div>
			<div class="wdh-half" data-half-hour="30">
			</div>
		</div>
		<div class="wd-hour" data-hour="13">
			<div class="wdh-half" data-half-hour="00">
			</div>
			<div class="wdh-half" data-half-hour="30">
			</div>
		</div>
		<div class="wd-hour" data-hour="14">
			<div class="wdh-half" data-half-hour="00">
			</div>
			<div class="wdh-half" data-half-hour="30">
			</div>
		</div>
		<div class="wd-hour" data-hour="15">
			<div class="wdh-half" data-half-hour="00">
			</div>
			<div class="wdh-half" data-half-hour="30">
			</div>
		</div>
		<div class="wd-hour" data-hour="16">
			<div class="wdh-half" data-half-hour="00">
			</div>
			<div class="wdh-half" data-half-hour="30">
			</div>
		</div>
		<div class="wd-hour" data-hour="17">
			<div class="wdh-half" data-half-hour="00">
			</div>
			<div class="wdh-half" data-half-hour="30">
			</div>
		</div>
		<div class="wd-hour" data-hour="18">
			<div class="wdh-half" data-half-hour="00">
			</div>
			<div class="wdh-half" data-half-hour="30">
			</div>
		</div>
		<div class="wd-hour" data-hour="19">
			<div class="wdh-half" data-half-hour="00">
			</div>
			<div class="wdh-half" data-half-hour="30">
			</div>
		</div>
		<div class="wd-hour" data-hour="20">
			<div class="wdh-half" data-half-hour="00">
			</div>
			<div class="wdh-half" data-half-hour="30">
			</div>
		</div>
		<div class="wd-hour" data-hour="21">
			<div class="wdh-half" data-half-hour="00">
			</div>
			<div class="wdh-half" data-half-hour="30">
			</div>
		</div>
		<div class="wd-hour" data-hour="22">
			<div class="wdh-half" data-half-hour="00">
			</div>
			<div class="wdh-half" data-half-hour="30">
			</div>
		</div>
	</div>
	<div class="w-day">
		<div class="wd-title">
			<span class="wdt-weekday">СБ</span>
			<span class="wdt-date"><?=unix_to_human(('2016-06-11'), 'd.m')?></span>
		</div>
		<div class="wd-hour" data-hour="7">
			<div class="wdh-half" data-half-hour="00">
			</div>
			<div class="wdh-half" data-half-hour="30">
			</div>
		</div>
		<div class="wd-hour" data-hour="8">
			<div class="wdh-half" data-half-hour="00">
			</div>
			<div class="wdh-half" data-half-hour="30">
			</div>
		</div>
		<div class="wd-hour" data-hour="9">
			<div class="wdh-half" data-half-hour="00">
			</div>
			<div class="wdh-half" data-half-hour="30">
			</div>
		</div>
		<div class="wd-hour" data-hour="10">
			<div class="wdh-half" data-half-hour="00">
			</div>
			<div class="wdh-half" data-half-hour="30">
			</div>
		</div>
		<div class="wd-hour" data-hour="11">
			<div class="wdh-half" data-half-hour="00">
			</div>
			<div class="wdh-half" data-half-hour="30">
			</div>
		</div>
		<div class="wd-hour" data-hour="12">
			<div class="wdh-half" data-half-hour="00">
			</div>
			<div class="wdh-half" data-half-hour="30">
			</div>
		</div>
		<div class="wd-hour" data-hour="13">
			<div class="wdh-half" data-half-hour="00">
			</div>
			<div class="wdh-half" data-half-hour="30">
			</div>
		</div>
		<div class="wd-hour" data-hour="14">
			<div class="wdh-half" data-half-hour="00">
			</div>
			<div class="wdh-half" data-half-hour="30">
			</div>
		</div>
		<div class="wd-hour" data-hour="15">
			<div class="wdh-half" data-half-hour="00">
			</div>
			<div class="wdh-half" data-half-hour="30">
			</div>
		</div>
		<div class="wd-hour" data-hour="16">
			<div class="wdh-half" data-half-hour="00">
			</div>
			<div class="wdh-half" data-half-hour="30">
			</div>
		</div>
		<div class="wd-hour" data-hour="17">
			<div class="wdh-half" data-half-hour="00">
			</div>
			<div class="wdh-half" data-half-hour="30">
			</div>
		</div>
		<div class="wd-hour" data-hour="18">
			<div class="wdh-half" data-half-hour="00">
			</div>
			<div class="wdh-half" data-half-hour="30">
			</div>
		</div>
		<div class="wd-hour" data-hour="19">
			<div class="wdh-half" data-half-hour="00">
			</div>
			<div class="wdh-half" data-half-hour="30">
			</div>
		</div>
		<div class="wd-hour" data-hour="20">
			<div class="wdh-half" data-half-hour="00">
			</div>
			<div class="wdh-half" data-half-hour="30">
			</div>
		</div>
		<div class="wd-hour" data-hour="21">
			<div class="wdh-half" data-half-hour="00">
			</div>
			<div class="wdh-half" data-half-hour="30">
			</div>
		</div>
		<div class="wd-hour" data-hour="22">
			<div class="wdh-half" data-half-hour="00">
			</div>
			<div class="wdh-half" data-half-hour="30">
			</div>
		</div>
	</div>
	<div class="w-day">
		<div class="wd-title">
			<span class="wdt-weekday">ВС</span>
			<span class="wdt-date"><?=unix_to_human(('2016-06-12'), 'd.m')?></span>
		</div>
		<div class="wd-hour" data-hour="7">
			<div class="wdh-half" data-half-hour="00">
			</div>
			<div class="wdh-half" data-half-hour="30">
			</div>
		</div>
		<div class="wd-hour" data-hour="8">
			<div class="wdh-half" data-half-hour="00">
			</div>
			<div class="wdh-half" data-half-hour="30">
			</div>
		</div>
		<div class="wd-hour" data-hour="9">
			<div class="wdh-half" data-half-hour="00">
			</div>
			<div class="wdh-half" data-half-hour="30">
			</div>
		</div>
		<div class="wd-hour" data-hour="10">
			<div class="wdh-half" data-half-hour="00">
			</div>
			<div class="wdh-half" data-half-hour="30">
			</div>
		</div>
		<div class="wd-hour" data-hour="11">
			<div class="wdh-half" data-half-hour="00">
			</div>
			<div class="wdh-half" data-half-hour="30">
			</div>
		</div>
		<div class="wd-hour" data-hour="12">
			<div class="wdh-half" data-half-hour="00">
			</div>
			<div class="wdh-half" data-half-hour="30">
			</div>
		</div>
		<div class="wd-hour" data-hour="13">
			<div class="wdh-half" data-half-hour="00">
			</div>
			<div class="wdh-half" data-half-hour="30">
			</div>
		</div>
		<div class="wd-hour" data-hour="14">
			<div class="wdh-half" data-half-hour="00">
			</div>
			<div class="wdh-half" data-half-hour="30">
			</div>
		</div>
		<div class="wd-hour" data-hour="15">
			<div class="wdh-half" data-half-hour="00">
			</div>
			<div class="wdh-half" data-half-hour="30">
			</div>
		</div>
		<div class="wd-hour" data-hour="16">
			<div class="wdh-half" data-half-hour="00">
			</div>
			<div class="wdh-half" data-half-hour="30">
			</div>
		</div>
		<div class="wd-hour" data-hour="17">
			<div class="wdh-half" data-half-hour="00">
			</div>
			<div class="wdh-half" data-half-hour="30">
			</div>
		</div>
		<div class="wd-hour" data-hour="18">
			<div class="wdh-half" data-half-hour="00">
			</div>
			<div class="wdh-half" data-half-hour="30">
			</div>
		</div>
		<div class="wd-hour" data-hour="19">
			<div class="wdh-half" data-half-hour="00">
			</div>
			<div class="wdh-half" data-half-hour="30">
			</div>
		</div>
		<div class="wd-hour" data-hour="20">
			<div class="wdh-half" data-half-hour="00">
			</div>
			<div class="wdh-half" data-half-hour="30">
			</div>
		</div>
		<div class="wd-hour" data-hour="21">
			<div class="wdh-half" data-half-hour="00">
			</div>
			<div class="wdh-half" data-half-hour="30">
			</div>
		</div>
		<div class="wd-hour" data-hour="22">
			<div class="wdh-half" data-half-hour="00">
			</div>
			<div class="wdh-half" data-half-hour="30">
			</div>
		</div>
	</div>
	<div class="timetable-lesson-items">
		<? foreach ($lessons as $lesson) { ?>
			<div class="tli-item" data-weekday="<?=date('w', strtotime($lesson['start_date']))?>" data-hour="<?=date('H', strtotime($lesson['start_date']))?>" data-minute="<?=date('i', strtotime($lesson['start_date']))?>"
				 data-duration="<?=$lesson['duration']?>">
				<div class="tlii-status">
					<span class="ld-status ld-status-<?=$lesson['status']?>"></span>
				</div>
				<div class="tlii-data">
					<div class="tliid-time" data-toggle="modal" data-target="#lessonEditModal" onclick="$('#lessonEditModal .modal-body').html(''); $.get('/services/lesson/edit/<?=$lesson['id']?>/<?=$lesson['client_id']?>', function(html) { $('#lessonEditModal .modal-body').html(html); })">
						<span class="ld-time-hour"><?=unix_to_human($lesson['start_date'], 'H')?></span><span class="ld-time-minute"><?=unix_to_human($lesson['start_date'], 'i')?></span>
					</div>
					<div class="tliid-client">
						<span class="cd-name"><span class="cd-place cd-place-<?=$lesson['place']?>"></span> <?=$lesson['name']?></span>
						<br><span class="ldc-duration"><?=($lesson['duration'])?> <span class="ld-currency">мин.</span></span>
					</div>
				</div>
			</div>
		<? } ?>
	</div>
</div>
<script>
	var minHour = 24;
	var maxHour = 0;
	$('.tli-item').each(function(i, el) {
		var duration = $(el).data('duration');
		var weekday = $(el).data('weekday');

		if (weekday == 0) { weekday = 6 } else { weekday -= 1; }

		var hour = $(el).data('hour');

		if (hour < minHour) { minHour = hour; }
		if ((hour + duration/60) > maxHour) { maxHour = parseInt(hour + duration/60); }

		var minute = $(el).data('minute');

		$(el).css({'margin-top':'calc('+(3*minute/60)+'em - 1px)', height:'calc('+(3*duration/60)+'em + 1px)'});
		$('.w-day').eq(weekday).find('.wd-hour').filter(function() { return ($(this).data('hour') == hour); }).before(el);
	});

	$('.w-day .wd-hour').filter(function() { return ($(this).data('hour') < minHour || $(this).data('hour') > maxHour); }).hide();

</script>